(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[178],{5544:function(e,t,i){Promise.resolve().then(i.bind(i,9861))},9861:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return z}});var n=i(3827),r=i(2647),l=i(6049),s=i(7122),o=i(9602),a=i(9960),d=i(8523),u=i(3048),c=i(6959),h=i(7230),x=i(1698),f=i(1861),m=i(5483),v=i(512),p=i(1342),j=i(4693),g=i(4854),b=i(1419),_=i(7333),N=i(4090),y=i(2670);let C=(0,i(2008).I)({displayName:"EditIcon",path:(0,n.jsxs)("g",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeWidth:"2",children:[(0,n.jsx)("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),(0,n.jsx)("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})]})});var I=i(3529),k=i(9755),S=i(7269);function z(){var e,t,i,z,E,w,P;let[A,W]=(0,N.useState)(!1),[K,L]=(0,N.useState)(!1),M=(0,r.p)(),{user:O,updateProfile:F}=(0,S.aC)(),{colorMode:G}=(0,l.If)(),{handleSubmit:U,register:X,reset:q,formState:{errors:Y}}=(0,y.cI)();(0,N.useEffect)(()=>{if(O){var e,t,i;q({fullName:(null===(e=O.user_metadata)||void 0===e?void 0:e.full_name)||"",email:O.email||"",phone:(null===(t=O.user_metadata)||void 0===t?void 0:t.phone)||"",address:(null===(i=O.user_metadata)||void 0===i?void 0:i.address)||""})}},[O,q]);let Z=async e=>{W(!0);try{await F({full_name:e.fullName,phone:e.phone,address:e.address}),M({title:"Profile updated.",description:"Your profile has been successfully updated.",status:"success",duration:3e3,isClosable:!0}),L(!1)}catch(e){console.error("Error updating profile:",e),M({title:"An error occurred.",description:"Unable to update profile. Please try again later.",status:"error",duration:5e3,isClosable:!0})}finally{W(!1)}};return(0,n.jsx)(k.Z,{children:(0,n.jsx)(I.Z,{children:(0,n.jsx)(s.W,{maxW:"container.md",py:{base:12,md:24},children:(0,n.jsxs)(o.K,{spacing:8,children:[(0,n.jsx)(a.X,{fontSize:"4xl",textAlign:"center",children:"Your Profile"}),(0,n.jsx)(d.x,{rounded:"lg",bg:"light"===G?"white":"gray.700",boxShadow:"lg",p:8,children:(0,n.jsxs)(u.g,{spacing:6,align:"stretch",children:[(0,n.jsx)(c.k,{justifyContent:"center",mb:4,children:(0,n.jsx)(h.q,{size:"2xl",name:(null==O?void 0:null===(e=O.user_metadata)||void 0===e?void 0:e.full_name)||(null==O?void 0:null===(t=O.email)||void 0===t?void 0:t.charAt(0).toUpperCase()),src:(null==O?void 0:null===(i=O.user_metadata)||void 0===i?void 0:i.avatar_url)||""})}),(0,n.jsxs)(x.U,{justifyContent:"space-between",children:[(0,n.jsx)(a.X,{as:"h3",size:"md",children:"Personal Information"}),(0,n.jsx)(f.h,{"aria-label":"Edit profile",icon:(0,n.jsx)(C,{}),onClick:()=>L(!K),variant:"ghost"})]}),(0,n.jsx)(m.i,{}),K?(0,n.jsx)("form",{onSubmit:U(Z),children:(0,n.jsxs)(o.K,{spacing:4,children:[(0,n.jsxs)(v.NI,{id:"fullName",isInvalid:!!Y.fullName,children:[(0,n.jsx)(p.l,{children:"Full Name"}),(0,n.jsx)(j.I,{...X("fullName",{required:"Full name is required"})}),(0,n.jsx)(g.J1,{children:null===(z=Y.fullName)||void 0===z?void 0:z.message})]}),(0,n.jsxs)(v.NI,{id:"email",isReadOnly:!0,children:[(0,n.jsx)(p.l,{children:"Email"}),(0,n.jsx)(j.I,{...X("email"),readOnly:!0}),(0,n.jsx)(b.x,{fontSize:"sm",color:"gray.500",mt:1,children:"Email cannot be changed"})]}),(0,n.jsxs)(v.NI,{id:"phone",children:[(0,n.jsx)(p.l,{children:"Phone"}),(0,n.jsx)(j.I,{...X("phone")})]}),(0,n.jsxs)(v.NI,{id:"address",children:[(0,n.jsx)(p.l,{children:"Address"}),(0,n.jsx)(j.I,{...X("address")})]}),(0,n.jsxs)(o.K,{direction:"row",spacing:4,pt:4,children:[(0,n.jsx)(_.z,{bg:"brand.500",color:"white",_hover:{bg:"brand.600"},type:"submit",isLoading:A,flex:1,children:"Save Changes"}),(0,n.jsx)(_.z,{variant:"outline",onClick:()=>L(!1),flex:1,children:"Cancel"})]})]})}):(0,n.jsxs)(o.K,{spacing:4,children:[(0,n.jsxs)(d.x,{children:[(0,n.jsx)(b.x,{fontWeight:"bold",children:"Full Name"}),(0,n.jsx)(b.x,{children:(null==O?void 0:null===(E=O.user_metadata)||void 0===E?void 0:E.full_name)||"Not provided"})]}),(0,n.jsxs)(d.x,{children:[(0,n.jsx)(b.x,{fontWeight:"bold",children:"Email"}),(0,n.jsx)(b.x,{children:null==O?void 0:O.email})]}),(0,n.jsxs)(d.x,{children:[(0,n.jsx)(b.x,{fontWeight:"bold",children:"Phone"}),(0,n.jsx)(b.x,{children:(null==O?void 0:null===(w=O.user_metadata)||void 0===w?void 0:w.phone)||"Not provided"})]}),(0,n.jsxs)(d.x,{children:[(0,n.jsx)(b.x,{fontWeight:"bold",children:"Address"}),(0,n.jsx)(b.x,{children:(null==O?void 0:null===(P=O.user_metadata)||void 0===P?void 0:P.address)||"Not provided"})]})]})]})})]})})})})}},9755:function(e,t,i){"use strict";i.d(t,{Z:function(){return d}});var n=i(3827),r=i(4090),l=i(7907),s=i(4824),o=i(4084),a=i(7269);function d(e){var t;let{children:i,adminOnly:d=!1}=e,{user:u,isLoading:c}=(0,a.aC)(),h=(0,l.useRouter)();return((0,r.useEffect)(()=>{var e;c||u?!c&&d&&(null==u?void 0:null===(e=u.app_metadata)||void 0===e?void 0:e.role)!=="admin"&&h.push("/"):h.push("/auth/signin")},[u,c,h,d]),c||!u||d&&(null==u?void 0:null===(t=u.app_metadata)||void 0===t?void 0:t.role)!=="admin")?(0,n.jsx)(s.M,{h:"100vh",children:(0,n.jsx)(o.$,{size:"xl",color:"brand.500"})}):(0,n.jsx)(n.Fragment,{children:i})}},4824:function(e,t,i){"use strict";i.d(t,{M:function(){return s}});var n=i(3827),r=i(8772),l=i(4413);let s=(0,r.m)("div",{baseStyle:{display:"flex",alignItems:"center",justifyContent:"center"}});s.displayName="Center";let o={horizontal:{insetStart:"50%",transform:"translateX(-50%)"},vertical:{top:"50%",transform:"translateY(-50%)"},both:{insetStart:"50%",top:"50%",transform:"translate(-50%, -50%)"}};(0,l.G)(function(e,t){let{axis:i="both",...l}=e;return(0,n.jsx)(r.m.div,{ref:t,__css:o[i],...l,position:"absolute"})})},5483:function(e,t,i){"use strict";i.d(t,{i:function(){return d}});var n=i(3827),r=i(2160),l=i(235),s=i(4413),o=i(1295),a=i(8772);let d=(0,s.G)(function(e,t){let{borderLeftWidth:i,borderBottomWidth:s,borderTopWidth:d,borderRightWidth:u,borderWidth:c,borderStyle:h,borderColor:x,...f}=(0,o.m)("Divider",e),{className:m,orientation:v="horizontal",__css:p,...j}=(0,r.L)(e);return(0,n.jsx)(a.m.hr,{ref:t,"aria-orientation":v,...j,__css:{...f,border:"0",borderColor:x,borderStyle:h,...{vertical:{borderLeftWidth:i||u||c||"1px",height:"100%"},horizontal:{borderBottomWidth:s||d||c||"1px",width:"100%"}}[v],...p},className:(0,l.cx)("chakra-divider",m)})});d.displayName="Divider"},1698:function(e,t,i){"use strict";i.d(t,{U:function(){return l}});var n=i(3827),r=i(9602);let l=(0,i(4413).G)((e,t)=>(0,n.jsx)(r.K,{align:"center",...e,direction:"row",ref:t}));l.displayName="HStack"},3048:function(e,t,i){"use strict";i.d(t,{g:function(){return l}});var n=i(3827),r=i(9602);let l=(0,i(4413).G)((e,t)=>(0,n.jsx)(r.K,{align:"center",...e,direction:"column",ref:t}));l.displayName="VStack"},2647:function(e,t,i){"use strict";i.d(t,{p:function(){return d}});var n=i(4090),r=i(4839),l=i(5707),s=i(4810),o=i(3378),a=i(859);function d(e){let{theme:t}=(0,a.uP)(),i=(0,o.OX)();return(0,n.useMemo)(()=>(function(e,t){let i=i=>{var n;return{...t,...i,position:function(e,t){var i;let n=null!=e?e:"bottom",r={"top-start":{ltr:"top-left",rtl:"top-right"},"top-end":{ltr:"top-right",rtl:"top-left"},"bottom-start":{ltr:"bottom-left",rtl:"bottom-right"},"bottom-end":{ltr:"bottom-right",rtl:"bottom-left"}}[n];return null!==(i=null==r?void 0:r[t])&&void 0!==i?i:n}(null!==(n=null==i?void 0:i.position)&&void 0!==n?n:null==t?void 0:t.position,e)}},n=e=>{let t=i(e),n=(0,l.C)(t);return s.f.notify(n,t)};return n.update=(e,t)=>{s.f.update(e,i(t))},n.promise=(e,t)=>{let i=n({...t.loading,status:"loading",duration:null});e.then(e=>n.update(i,{status:"success",duration:5e3,...(0,r.P)(t.success,e)})).catch(e=>n.update(i,{status:"error",duration:5e3,...(0,r.P)(t.error,e)}))},n.closeAll=s.f.closeAll,n.close=s.f.close,n.isActive=s.f.isActive,n})(t.direction,{...i,...e}),[e,t.direction,i])}}},function(e){e.O(0,[699,704,59,587,262,378,374,529,971,69,744],function(){return e(e.s=5544)}),_N_E=e.O()}]);